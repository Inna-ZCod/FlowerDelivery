{% extends 'base.html' %}

{% block content %}
<h2>üìä –û—Ç—á—ë—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>

<p>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤: <strong>{{ total_orders }}</strong></p>


<h3>–ó–∞–∫–∞–∑—ã –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º:</h3>
<table>
    <tr>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
    </tr>
    {% for status, count in orders_by_status.items %}
    <tr>
        <td>{{ status }}</td>
        <td>{{ count }}</td>
    </tr>
    {% endfor %}
</table>


<h3>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</h3>
<table border="1">
    <tr>
        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤</th>
    </tr>
    {% for user in user_orders_count %}
    <tr>
        <td>{{ user.user__username }}</td>
        <td>{{ user.total }}</td>
    </tr>
    {% endfor %}
</table>


<h3>–°—Ä–µ–¥–Ω–∏–π —á–µ–∫ –∑–∞–∫–∞–∑–æ–≤</h3>
<p><strong>{{ average_order_value|floatformat:2 }} —Ä—É–±.</strong></p>


<h3>–í—ã—Ä—É—á–∫–∞</h3>
<p><strong>–ó–∞ —Å–µ–≥–æ–¥–Ω—è:</strong> {{ revenue_today|floatformat:2 }} —Ä—É–±.</p>
<p><strong>–ó–∞ –Ω–µ–¥–µ–ª—é:</strong> {{ revenue_week|floatformat:2 }} —Ä—É–±.</p>
<p><strong>–ó–∞ –º–µ—Å—è—Ü:</strong> {{ revenue_month|floatformat:2 }} —Ä—É–±.</p>


<h3>–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –±—É–∫–µ—Ç—ã</h3>
<table border="1">
    <tr>
        <th>–ë—É–∫–µ—Ç</th>
        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤</th>
    </tr>
    {% for bouquet in popular_bouquets %}
    <tr>
        <td>{{ bouquet.products__name }}</td>
        <td>{{ bouquet.total }}</td>
    </tr>
    {% endfor %}
</table>

<a href="{% url 'download_report' %}" class="btn btn-primary">üì• –°–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç</a>
{% endblock %}