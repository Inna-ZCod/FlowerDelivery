{% extends 'base.html' %}

{% block title %}Корзина{% endblock %}

{% block content %}
<h1>Ваша корзина</h1>

<ul>
    {% for item in cart_items %}
    <div class="cart-item">
        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" width="150" height="150">
        <h3>{{ item.product.name }}</h3>
        <p>Цена: {{ item.product.price }} руб.</p>

        <!-- Поля для ввода данных -->
        <label for="address-{{ item.id }}">Адрес доставки:</label>
        <input type="text" id="address-{{ item.id }}" name="address_{{ item.id }}" value="{{ item.address }}">

        <label for="card_text-{{ item.id }}">Текст на открытке:</label>
        <textarea id="card_text-{{ item.id }}" name="card_text_{{ item.id }}">{{ item.card_text }}</textarea>

        <label for="signature-{{ item.id }}">Подпись:</label>
        <input type="text" id="signature-{{ item.id }}" name="signature_{{ item.id }}" value="{{ item.signature }}">

        <!-- Кнопка для удаления -->
        <form method="post" action="{% url 'remove_from_cart' item.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Удалить</button>
        </form>
    </div>
    {% endfor %}
</ul>

<h2>Общая стоимость: {{ total_price }} руб.</h2>

<!-- Форма для подтверждения заказа -->
<form method="post" action="{% url 'confirm_order' %}">
    {% csrf_token %}
    <button type="submit" class="btn btn-success">Подтвердить заказ</button>
</form>

<!-- Кнопка для продолжения покупок -->
<a href="{% url 'catalog' %}" class="btn btn-secondary">Продолжить покупки</a>
{% endblock %}
